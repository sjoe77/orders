<turbo-frame id="product_categories">
  <div class="relationship-section">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h6 class="mb-0">Categories (<%= @categories.total_count %>)</h6>
      <button type="button"
              class="btn btn-primary btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#categoryLinkModal_product_<%= @product.id %>">
        <i class="bi bi-link"></i> Manage Categories
      </button>
    </div>

    <% if !@categories.empty? %>
      <%= render TableComponent.new(
        collection: @categories,
        config: Category.table_config.merge(
          entity_name: 'category',
          frame_id: 'product_categories',
          show_delete_checkboxes: false,
          disable_row_clicks: true,
          base_url: categories_product_path(@product)
        ),
        current_params: params.except(:id).permit!
      ) %>
    <% else %>
      <div class="text-center py-4 text-muted">
        <i class="bi bi-link-45deg fs-1 mb-2 d-block"></i>
        <p class="mb-0">No categories linked yet</p>
        <small>Click "Manage Categories" to add relationships</small>
      </div>
    <% end %>
  </div>
</turbo-frame>