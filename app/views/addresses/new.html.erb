<%
  # If accessed via Turbo Frame, wrap in the frame
  is_nested = defined?(@customer) && @customer.present?
  frame_id = is_nested ? "customer_addresses" : nil
%>

<% if frame_id %>
  <%= turbo_frame_tag frame_id do %>
    <div class="relationship-section"
         data-relationship-type="addresses"
         data-relationship-pattern="nested_attributes">

      <div class="d-flex justify-content-between align-items-center mb-3">
        <h6 class="mb-0">New Address</h6>
      </div>

      <%= render 'form', address: @address %>
    </div>
  <% end %>
<% else %>
  <%= render PageHeaderComponent.new %>

  <div class="container-fluid px-3 pb-4">
    <div class="row">
      <div class="col-12">
        <%= render 'form', address: @address %>
      </div>
    </div>
  </div>
<% end %>